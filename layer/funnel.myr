use region
use sys

pkg layer =
	type funnel
	impl region.layer funnel
;;

type funnel = struct
	upper : region.region#
;;

impl region.layer funnel =
	init = {
		var a : funnel
		a.upper = region.top()
		-> a
	}
	deinit = {a
		a.upper.cleanup()
	}
	get = {a, sz
		-> a.upper.bytealloc(sz)
	}
	put = {a, p, sz
		a.upper.bytefree(p, sz)
	}
;;
